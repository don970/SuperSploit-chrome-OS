import os
import sys
from subprocess import run
from time import sleep

from ppadb.client import Client as adbClient
#!#!#!
# This uses adb to root an android device via usb
#!#!#!
# start the adb client
adb = adbClient("127.0.0.1", 5037)

# gather devices
clients = adb.devices()
try:
    client = clients[0]
except IndexError:
    print("No devices found")
    sys.exit()

# reboot device to bootloader
print(f"Found {client} rebooting device to bootloader")
client.shell("reboot bootloader")

# wait for the device to reboot to bootloader
sleep(4.5)

# check connections
fastboot_check = run(["fastboot", "devices"], capture_output=True)

def root():
    print("Sending anykernal zip file to device to disable "
          "force encryption and dm verify Please follow "
          "instructions on device")
    run(['adb', "sideload", f"webServer/assets/dis.zip"])
    s
    
    
    
    
    
    
    
    
    
    
    \\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\       asl    2waw.etg   r434, mrf  zvleep(10)
    print("Sending Magisk zip file attempting root\nPlease follow instructions on device")
 b g   run(['adb', "sideload", f"webServer/assets/Magisk.zip"])
    pass
